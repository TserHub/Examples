<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="renderer" content="webkit" />
  <meta name="force-rendering" content="webkit" />
  <meta name="google" value="notranslate" />
  <title>async</title>
  <script src="https://cdn.jsdelivr.net/npm/vue"></script>
</head>

<body>
  <main id='fetch'>
    <ul>
      <li v-for="(user, index) in users">{{ user.name }}</li>
    </ul>
    <ol>
      <li>name: {{ user.name }}</li>
      <li>email: {{ user.email }}</li>
      <li>website: {{ user.website }}</li>
    </ol>
  </main>
</body>

</html>
<script>
  (function () {
    new Vue({
      el: '#fetch',
      data() {
        return {
          users: [],
          user: {},
        };
      },
      created() {
        this.request();
        this.anotherRequest();
      },
      methods: {
        async request() {
          const users = await fetch('http://jsonplaceholder.typicode.com/users')
            .then((res) => res.json());
          const user = await fetch(`http://jsonplaceholder.typicode.com/users/${users[0].id}`)
            .then((res) => res.json());
          this.users = users;
          this.user = user;
        },
        async anotherRequest() {
          const res = await this.getUsers();
          console.log(res);
        },
        getUsers() {
          return new Promise((resolve, reject) => {
            fetch('http://jsonplaceholder.typicode.com/users')
              .then(res => res.json())
              .then(res => resolve(res))
              .catch(err => reject(err));
          });
        },
      }
    });
  })();
</script>
